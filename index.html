<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="page_title">Equity Hubs</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flag-icons/css/flag-icons.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/jpeg" href="favicon.ico">
    <style>
        /* Popup styles */
        .popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        .popup-content {
            background: white;
            padding: 20px;
            border-radius: 8px;
            width: 90%;
            max-width: 400px;
            position: relative;
        }
        .popup-content h2 {
            margin-top: 0;
            color: #333;
        }
        .popup-content input, .popup-content select {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .popup-content button {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .popup-content button:hover {
            background: #0056b3;
        }
        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
            color: #333;
            cursor: pointer;
            z-index: 1001;
            line-height: 1;
            width: 24px;
            height: 24px;
            text-align: center;
            display: block;
        }
        .close-btn:hover {
            color: #007bff;
        }
        .popup-content a {
            color: #007bff;
            text-decoration: none;
            display: block;
            text-align: center;
            margin-top: 10px;
        }
        .popup-content a:hover {
            text-decoration: underline;
        }
        .error-message {
            color: red;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        .success-message {
            color: green;
            font-weight: 600;
            margin: 10px 0;
            display: none;
            position: relative;
        }
        .close-success {
            position: absolute;
            right: 0;
            top: 0;
            cursor: pointer;
            font-size: 18px;
            line-height: 1;
        }
        /* Language selector styles */
        .language-selector {
            position: relative;
            display: inline-block;
        }
        .language-selector select {
            padding: 5px 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background: white;
            cursor: pointer;
            font-size: 14px;
            color: #333;
        }
        @media (min-width: 768px) {
            .language-selector select {
                padding: 8px 12px;
                font-size: 16px;
            }
        }
    </style>
</head>
 строительства<body>
    <div class="container">
        <header>
            <div class="alert-ticker-container">
                <p class="ticker-content" data-i18n="alert">
                    BE AWARE OF FRAUD: Equityhubs will **NEVER** ask you to send money to a personal account. Always deposit funds through the secure, verified platform channels. Protect your investment.
                </p>
            </div>
            <nav>
                <div class="nav-left-mobile">
                    <div class="menu-icon" id="menu-toggle">
                        <div class="hamburger-lines"></div>
                        <div class="hamburger-lines"></div>
                        <div class="hamburger-lines"></div>
                    </div>
                </div>
                <div class="nav-links" id="nav-links-menu">
                    <a href="index.html" data-i18n="nav_home">Home</a>
                    <a href="about.html" data-i18n="nav_about">About Us</a>
                    <a href="contact.html" data-i18n="nav_contacts">Contacts</a>
                    <a href="investment.html" data-i18n="nav_investment">Investment</a>
                </div>
                <div class="language-selector">
                    <select id="languageSwitcher">
                        <option value="en">English</option>
                        <option value="fr">Français</option>
                        <option value="es">Español</option>
                    </select>
                </div>
                <div class="ykc">
                    <a href=""> <i class="fa-solid fa-user"></i> </a>
                </div>
                <div class="nav-right-buttons auth-buttons">
                    <a href="#" class="login-btn" data-i18n="login">Login</a>
                    <a href="#" class="register-btn" data-i18n="register">Register <i class="fa-solid fa-angle-right"></i></a>
                </div>
                <div class="nav-right-buttons trade-buttons" style="display: none;">
                    <a style="background-color: rgb(4, 28, 4); color: white; padding: 12px; border-radius: 5px;" href="dashboard.html" class="trade-btn" data-i18n="trade">Trade</a>
                </div>
            </nav>
        </header>

        <!-- Login Popup -->
        <div id="login-popup" class="popup">
            <div class="popup-content">
                <span class="close-btn">&times;</span>
                <h2 data-i18n="login_title">Login</h2>
                <div class="success-message">
                    <span id="login-success-text"></span>
                    <span class="close-success">&times;</span>
                </div>
                <input type="email" id="login-email" data-i18n="[placeholder]email" placeholder="Email" required>
                <input type="password" id="login-password" data-i18n="[placeholder]password" placeholder="Password" required>
                <p id="login-error" class="error-message"></p>
                <button id="login-submit" data-i18n="login_button">Login</button>
                <a href="#" id="forgot-password-link" data-i18n="forgot_password">Forgot Password?</a>
                <a href="#" id="switch-to-register" data-i18n="switch_to_register">Don't have an account? Register</a>
            </div>
        </div>

        <!-- Register Popup -->
        <div id="register-popup" class="popup">
            <div class="popup-content">
                <span class="close-btn">&times;</span>
                <h2 data-i18n="create_account">Create Account</h2>
                <div class="success-message">
                    <span id="register-success-text"></span>
                    <span class="close-success">&times;</span>
                </div>
                <input type="text" id="register-name" data-i18n="[placeholder]name" placeholder="Name" required>
                <select id="register-country" required>
                    <option value="" disabled selected data-i18n="select_country">Select Country</option>
                    <!-- (Country list unchanged - kept for brevity) -->
                    <option value="AF">Afghanistan</option>
                    <option value="AL">Albania</option>
                    <option value="DZ">Algeria</option>
                    <!-- ... rest of countries ... -->
                    <option value="NG">Nigeria</option>
                </select>
                <input type="tel" id="register-phone" data-i18n="[placeholder]phone" placeholder="Phone Number" required>
                <input type="text" id="register-referral" data-i18n="[placeholder]referral" placeholder="Referral Code (Optional)">
                <input type="email" id="register-email" data-i18n="[placeholder]email" placeholder="Email" required>
                <input type="password" id="register-password" data-i18n="[placeholder]password" placeholder="Password" required>
                <input type="password" id="register-confirm-password" data-i18n="[placeholder]confirm_password" placeholder="Confirm Password" required>
                <p id="register-error" class="error-message"></p>
                <button id="register-submit" data-i18n="register_button">Register</button>
                <a href="#" id="switch-to-login" data-i18n="switch_to_login">Already have an account? Login</a>
            </div>
        </div>

        <!-- Forgot Password Popup -->
        <div id="forgot-password-popup" class="popup">
            <div class="popup-content">
                <span class="close-btn">&times;</span>
                <h2 data-i18n="forgot_password_title">Forgot Password</h2>
                <input type="email" id="forgot-email" data-i18n="[placeholder]email" placeholder="Email" required>
                <p id="forgot-error" class="error-message"></p>
                <button id="forgot-submit" data-i18n="send_reset_link">Send Reset Link</button>
                <a href="#" id="switch-to-login-from-forgot" data-i18n="back_to_login">Back to Login</a>
            </div>
        </div>

        <!-- Rest of your page content (unchanged) -->
        <section class="hero-section"> ... </section>
        <!-- ... all other sections ... -->
        
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/i18next@21.6.14/dist/umd/i18next.min.js"></script>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js';
        import {
            getAuth,
            signInWithEmailAndPassword,
            createUserWithEmailAndPassword,
            sendPasswordResetEmail,
            onAuthStateChanged,
            updateProfile
        } from 'https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js';
        import {
            getFirestore,
            doc,
            setDoc,
            addDoc,
            collection,
            serverTimestamp
        } from 'https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyDnEbph9IMZuJ3REbfTsocV-g7APCrE-1w",
            authDomain: "investment-40343.firebaseapp.com",
            projectId: "investment-40343",
            storageBucket: "investment-40343.firebasestorage.app",
            messagingSenderId: "126093031981",
            appId: "1:126093031981:web:fd4ae73c063044693b16a4",
            measurementId: "G-SXL6ZGL49W"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // === FULL TRANSLATIONS ===
        const translations = {
            en: {
                page_title: "Equity Hubs",
                alert: "BE AWARE OF FRAUD: Equityhubs will **NEVER** ask you to send money to a personal account. Always deposit funds through the secure, verified platform channels. Protect your investment.",
                nav_home: "Home",
                nav_about: "About Us",
                nav_contacts: "Contacts",
                nav_investment: "Investment",
                login: "Login",
                register: "Register",
                trade: "Trade",
                login_title: "Login",
                login_button: "Login",
                forgot_password: "Forgot Password?",
                switch_to_register: "Don't have an account? Register",
                create_account: "Create Account",
                select_country: "Select Country",
                name: "Name",
                phone: "Phone Number",
                referral: "Referral Code (Optional)",
                email: "Email",
                password: "Password",
                confirm_password: "Confirm Password",
                register_button: "Register",
                switch_to_login: "Already have an account? Login",
                forgot_password_title: "Forgot Password",
                send_reset_link: "Send Reset Link",
                back_to_login: "Back to Login",
                login_success: "Login successful!",
                register_success: "Registration successful!",
                fill_all_fields: "Please fill in all required fields.",
                passwords_mismatch: "Passwords do not match.",
                // ... rest of translations ...
                footer_copyright: "© 2010 Equity Hubs. All rights reserved."
            },
            fr: {
                login_success: "Connexion réussie !",
                register_success: "Inscription réussie !",
                fill_all_fields: "Veuillez remplir tous les champs obligatoires.",
                passwords_mismatch: "Les mots de passe ne correspondent pas.",
                // ... other translations ...
            },
            es: {
                login_success: "¡Inicio de sesión exitoso!",
                register_success: "¡Registro exitoso!",
                fill_all_fields: "Por favor complete todos los campos requeridos.",
                passwords_mismatch: "Las contraseñas no coinciden.",
                // ... other translations ...
            }
        };

        // Initialize i18next
        i18next.init({
            lng: 'en',
            resources: {
                en: { translation: translations.en },
                fr: { translation: translations.fr },
                es: { translation: translations.es }
            }
        }, () => updateContent());

        function updateContent() {
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (key.startsWith('[placeholder]')) {
                    const realKey = key.replace('[placeholder]', '');
                    el.placeholder = i18next.t(realKey);
                } else {
                    el.textContent = i18next.t(key);
                }
            });
            document.title = i18next.t('page_title');
        }

        document.getElementById('languageSwitcher')?.addEventListener('change', (e) => {
            i18next.changeLanguage(e.target.value, updateContent);
        });

        // === Popups & Auth ===
        const loginPopup = document.getElementById('login-popup');
        const registerPopup = document.getElementById('register-popup');
        const forgotPasswordPopup = document.getElementById('forgot-password-popup');
        const loginBtn = document.querySelector('.login-btn');
        const registerBtn = document.querySelector('.register-btn');
        const authButtons = document.querySelector('.auth-buttons');
        const tradeButtons = document.querySelector('.trade-buttons');
        const closeButtons = document.querySelectorAll('.close-btn');

        function showPopup(popup) { if (popup) popup.style.display = 'flex'; }
        function hidePopup(popup) {
            if (popup) {
                popup.style.display = 'none';
                popup.querySelectorAll('input, select').forEach(i => i.value = '');
                const err = popup.querySelector('.error-message');
                if (err) err.style.display = 'none';
                const success = popup.querySelector('.success-message');
                if (success) success.style.display = 'none';
            }
        }

        function showSuccess(popup, message) {
            const banner = popup.querySelector('.success-message');
            const text = banner.querySelector('span[id$="-success-text"]');
            text.textContent = message;
            banner.style.display = 'block';

            setTimeout(() => {
                hidePopup(popup);
            }, 1500);
        }

        closeButtons.forEach(btn => btn.addEventListener('click', () => hidePopup(btn.closest('.popup'))));
        document.querySelectorAll('.close-success').forEach(x => {
            x.addEventListener('click', e => {
                e.target.closest('.success-message').style.display = 'none';
            });
        });

        loginBtn?.addEventListener('click', e => { e.preventDefault(); showPopup(loginPopup); });
        registerBtn?.addEventListener('click', e => { e.preventDefault(); showPopup(registerPopup); });
        document.getElementById('forgot-password-link')?.addEventListener('click', e => { e.preventDefault(); hidePopup(loginPopup); showPopup(forgotPasswordPopup); });
        document.getElementById('switch-to-register')?.addEventListener('click', e => { e.preventDefault(); hidePopup(loginPopup); showPopup(registerPopup); });
        document.getElementById('switch-to-login')?.addEventListener('click', e => { e.preventDefault(); hidePopup(registerPopup); showPopup(loginPopup); });
        document.getElementById('switch-to-login-from-forgot')?.addEventListener('click', e => { e.preventDefault(); hidePopup(forgotPasswordPopup); showPopup(loginPopup); });

        // === Login Submit ===
        document.getElementById('login-submit')?.addEventListener('click', () => {
            const email = document.getElementById('login-email').value.trim();
            const password = document.getElementById('login-password').value;

            const errorEl = document.getElementById('login-error');

            if (!email || !password) {
                errorEl.textContent = i18next.t('fill_all_fields');
                errorEl.style.display = 'block';
                return;
            }

            errorEl.style.display = 'none';

            signInWithEmailAndPassword(auth, email, password)
                .then(() => {
                    showSuccess(loginPopup, i18next.t('login_success'));
                })
                .catch(err => {
                    errorEl.textContent = err.message;
                    errorEl.style.display = 'block';
                });
        });

        // === Register Submit ===
        document.getElementById('register-submit')?.addEventListener('click', () => {
            const name = document.getElementById('register-name').value.trim();
            const country = document.getElementById('register-country').value;
            const phone = document.getElementById('register-phone').value.trim();
            const email = document.getElementById('register-email').value.trim();
            const password = document.getElementById('register-password').value;
            const confirm = document.getElementById('register-confirm-password').value;

            const errorEl = document.getElementById('register-error');

            if (!name || !country || !phone || !email || !password) {
                errorEl.textContent = i18next.t('fill_all_fields');
                errorEl.style.display = 'block';
                return;
            }
            if (password !== confirm) {
                errorEl.textContent = i18next.t('passwords_mismatch');
                errorEl.style.display = 'block';
                return;
            }

            errorEl.style.display = 'none';

            createUserWithEmailAndPassword(auth, email, password)
                .then(cred => updateProfile(cred.user, { displayName: name }))
                .then(() => setDoc(doc(db, 'users', auth.currentUser.uid), {
                    name, country, phone, email,
                    createdAt: new Date().toISOString()
                }))
                .then(() => {
                    showSuccess(registerPopup, i18next.t('register_success'));
                })
                .catch(err => {
                    errorEl.textContent = err.message;
                    errorEl.style.display = 'block';
                });
        });

        // === Forgot Password ===
        document.getElementById('forgot-submit')?.addEventListener('click', () => {
            const email = document.getElementById('forgot-email').value.trim();
            const errorEl = document.getElementById('forgot-error');
            if (!email) {
                errorEl.textContent = 'Please enter your email';
                errorEl.style.display = 'block';
                return;
            }
            sendPasswordResetEmail(auth, email)
                .then(() => {
                    alert('Password reset email sent!');
                    hidePopup(forgotPasswordPopup);
                })
                .catch(err => {
                    errorEl.textContent = err.message;
                    errorEl.style.display = 'block';
                });
        });

        // === Auth State Listener ===
        onAuthStateChanged(auth, user => {
            if (user) {
                authButtons.style.display = 'none';
                tradeButtons.style.display = 'flex';
            } else {
                authButtons.style.display = 'flex';
                tradeButtons.style.display = 'none';
            }
        });

        // === Visitor Tracking ===
        let hasTrackedVisit = false;
        async function trackPageVisit() {
            if (hasTrackedVisit) return;
            hasTrackedVisit = true;
            let country = 'Unknown';
            try {
                const res = await fetch('https://ipapi.co/json/');
                const data = await res.json();
                country = data.country_name || 'Unknown';
            } catch (e) {}
            const visitData = {
                userId: auth.currentUser?.uid || null,
                userName: auth.currentUser?.displayName || null,
                userEmail: auth.currentUser?.email || null,
                country,
                browser: navigator.userAgent,
                referrer: document.referrer || 'direct',
                url: location.href,
                timestamp: serverTimestamp()
            };
            try {
                await addDoc(collection(db, 'indexPageVisits'), visitData);
            } catch (err) {
                console.warn('Visit log failed:', err);
            }
        }
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', trackPageVisit);
        } else {
            trackPageVisit();
        }

        updateContent();
    </script>

    <!-- Smartsupp Live Chat -->
    <script type="text/javascript">
        var _smartsupp = _smartsupp || {};
        _smartsupp.key = '7f2bba33007b0ceba9ef214c29b3c6dcb2c1112d';
        window.smartsupp||(function(d) {
          var s,c,o=smartsupp=function(){ o._.push(arguments)};o._=[];
          s=d.getElementsByTagName('script')[0];c=d.createElement('script');
          c.type='text/javascript';c.charset='utf-8';c.async=true;
          c.src='https://www.smartsuppchat.com/loader.js?';s.parentNode.insertBefore(c,s);
        })(document);
    </script>
    <noscript> Powered by <a href="https://www.smartsupp.com" target="_blank">Equity Hubz</a></noscript>

    <script>
        // Mobile Menu Toggle
        const menuToggle = document.getElementById('menu-toggle');
        const navLinks = document.getElementById('nav-links-menu');
        if (menuToggle && navLinks) {
            menuToggle.addEventListener('click', () => {
                navLinks.classList.toggle('active');
                menuToggle.classList.toggle('open');
            });
            navLinks.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    navLinks.classList.remove('active');
                    menuToggle.classList.remove('open');
                });
            });
        }
    </script>
</body>
</html>